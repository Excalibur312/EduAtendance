<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Yemekhane Memnuniyet Anketi</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="styles.css" rel="stylesheet" />
</head>

<body>
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <div class="survey-container">
                    <div class="survey-header">
                    </div>

                    <div class="p-4">
                        <form id="surveyForm">
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        get();
        async function get() {
            var res = await fetch('https://localhost:7114/api/SurveyTemplates/0198e7f0-0d6a-791e-b631-a3852e3358d5').then(res => res.json());
            var titleEl = document.querySelector(".survey-header");
            const title = `<h1>${res.title}</h1>`
            titleEl.innerHTML = title;

            var text = res.categories.map(val => `
        <div class="category-section">
            <div class="category-title">
                ${val.title}
            </div>

            ${val.questions.map((q, qi) => `
                    <div class="question-card">
                        <div class="question-text">${q.name}</div>
                        <div class="rating-options">
                            ${val.options.map((o, oi) => `
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q${qi}" id="q${qi}_${oi}" value="${o.name}">
                                    <label class="form-check-label" for="q${qi}_${oi}">${o.name}</label>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `).join('')
                }
        </div>
`).join('');

            const categoryEl = document.querySelector("#surveyForm");
            categoryEl.innerHTML = text;
        }
    </script>
</body>

</html>